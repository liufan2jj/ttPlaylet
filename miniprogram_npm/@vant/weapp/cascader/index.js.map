{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\cascader\\index.js","names":["__spreadArray","this","to","from","pack","arguments","length","ar","i","l","Array","prototype","slice","call","concat","Object","defineProperty","exports","value","FieldName","component_1","require","defaultFieldNames","text","TEXT","VALUE","children","CHILDREN","VantComponent","props","title","String","type","placeholder","activeColor","options","swipeable","Boolean","closeable","showHeader","closeIcon","fieldNames","observer","useTitleSlot","data","tabs","activeTab","textKey","valueKey","childrenKey","innerValue","watch","updateTabs","newVal","updateValue","created","methods","val","_this","undefined","map","tab","selected","indexOf","updateFieldNames","_a","_b","_c","_d","setData","getSelectedOptionsByValue","option","selectedOptions","optionsCursor_1","tabs_1","next","find","item","push","wx","nextTick","onClose","$emit","onClickTab","e","detail","tabIndex","index","onSelect","currentTarget","dataset","disabled","nextTab","filter","params"],"sources":["node_modules\\@vant\\weapp\\lib\\cascader\\index.js"],"sourcesContent":["\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar FieldName;\n(function (FieldName) {\n    FieldName[\"TEXT\"] = \"text\";\n    FieldName[\"VALUE\"] = \"value\";\n    FieldName[\"CHILDREN\"] = \"children\";\n})(FieldName || (FieldName = {}));\nvar defaultFieldNames = {\n    text: FieldName.TEXT,\n    value: FieldName.VALUE,\n    children: FieldName.CHILDREN,\n};\n(0, component_1.VantComponent)({\n    props: {\n        title: String,\n        value: {\n            type: String,\n        },\n        placeholder: {\n            type: String,\n            value: '请选择',\n        },\n        activeColor: {\n            type: String,\n            value: '#1989fa',\n        },\n        options: {\n            type: Array,\n            value: [],\n        },\n        swipeable: {\n            type: Boolean,\n            value: false,\n        },\n        closeable: {\n            type: Boolean,\n            value: true,\n        },\n        showHeader: {\n            type: Boolean,\n            value: true,\n        },\n        closeIcon: {\n            type: String,\n            value: 'cross',\n        },\n        fieldNames: {\n            type: Object,\n            value: defaultFieldNames,\n            observer: 'updateFieldNames',\n        },\n        useTitleSlot: Boolean,\n    },\n    data: {\n        tabs: [],\n        activeTab: 0,\n        textKey: FieldName.TEXT,\n        valueKey: FieldName.VALUE,\n        childrenKey: FieldName.CHILDREN,\n        innerValue: '',\n    },\n    watch: {\n        options: function () {\n            this.updateTabs();\n        },\n        value: function (newVal) {\n            this.updateValue(newVal);\n        },\n    },\n    created: function () {\n        this.updateTabs();\n    },\n    methods: {\n        updateValue: function (val) {\n            var _this = this;\n            if (val !== undefined) {\n                var values = this.data.tabs.map(function (tab) { return tab.selected && tab.selected[_this.data.valueKey]; });\n                if (values.indexOf(val) > -1) {\n                    return;\n                }\n            }\n            this.innerValue = val;\n            this.updateTabs();\n        },\n        updateFieldNames: function () {\n            var _a = this.data.fieldNames || defaultFieldNames, _b = _a.text, text = _b === void 0 ? 'text' : _b, _c = _a.value, value = _c === void 0 ? 'value' : _c, _d = _a.children, children = _d === void 0 ? 'children' : _d;\n            this.setData({\n                textKey: text,\n                valueKey: value,\n                childrenKey: children,\n            });\n        },\n        getSelectedOptionsByValue: function (options, value) {\n            for (var i = 0; i < options.length; i++) {\n                var option = options[i];\n                if (option[this.data.valueKey] === value) {\n                    return [option];\n                }\n                if (option[this.data.childrenKey]) {\n                    var selectedOptions = this.getSelectedOptionsByValue(option[this.data.childrenKey], value);\n                    if (selectedOptions) {\n                        return __spreadArray([option], selectedOptions, true);\n                    }\n                }\n            }\n        },\n        updateTabs: function () {\n            var _this = this;\n            var options = this.data.options;\n            var innerValue = this.innerValue;\n            if (!options.length) {\n                return;\n            }\n            if (innerValue !== undefined) {\n                var selectedOptions = this.getSelectedOptionsByValue(options, innerValue);\n                if (selectedOptions) {\n                    var optionsCursor_1 = options;\n                    var tabs_1 = selectedOptions.map(function (option) {\n                        var tab = {\n                            options: optionsCursor_1,\n                            selected: option,\n                        };\n                        var next = optionsCursor_1.find(function (item) { return item[_this.data.valueKey] === option[_this.data.valueKey]; });\n                        if (next) {\n                            optionsCursor_1 = next[_this.data.childrenKey];\n                        }\n                        return tab;\n                    });\n                    if (optionsCursor_1) {\n                        tabs_1.push({\n                            options: optionsCursor_1,\n                            selected: null,\n                        });\n                    }\n                    this.setData({\n                        tabs: tabs_1,\n                    });\n                    wx.nextTick(function () {\n                        _this.setData({\n                            activeTab: tabs_1.length - 1,\n                        });\n                    });\n                    return;\n                }\n            }\n            this.setData({\n                tabs: [\n                    {\n                        options: options,\n                        selected: null,\n                    },\n                ],\n                activeTab: 0,\n            });\n        },\n        onClose: function () {\n            this.$emit('close');\n        },\n        onClickTab: function (e) {\n            var _a = e.detail, tabIndex = _a.index, title = _a.title;\n            this.$emit('click-tab', { title: title, tabIndex: tabIndex });\n            this.setData({\n                activeTab: tabIndex,\n            });\n        },\n        // 选中\n        onSelect: function (e) {\n            var _this = this;\n            var _a = e.currentTarget.dataset, option = _a.option, tabIndex = _a.tabIndex;\n            if (option && option.disabled) {\n                return;\n            }\n            var _b = this.data, valueKey = _b.valueKey, childrenKey = _b.childrenKey;\n            var tabs = this.data.tabs;\n            tabs[tabIndex].selected = option;\n            if (tabs.length > tabIndex + 1) {\n                tabs = tabs.slice(0, tabIndex + 1);\n            }\n            if (option[childrenKey]) {\n                var nextTab = {\n                    options: option[childrenKey],\n                    selected: null,\n                };\n                if (tabs[tabIndex + 1]) {\n                    tabs[tabIndex + 1] = nextTab;\n                }\n                else {\n                    tabs.push(nextTab);\n                }\n                wx.nextTick(function () {\n                    _this.setData({\n                        activeTab: tabIndex + 1,\n                    });\n                });\n            }\n            this.setData({\n                tabs: tabs,\n            });\n            var selectedOptions = tabs.map(function (tab) { return tab.selected; }).filter(Boolean);\n            var value = option[valueKey];\n            var params = {\n                value: value,\n                tabIndex: tabIndex,\n                selectedOptions: selectedOptions,\n            };\n            this.innerValue = value;\n            this.$emit('change', params);\n            if (!option[childrenKey]) {\n                this.$emit('finish', params);\n            }\n        },\n    },\n});\n"],"mappings":"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","ignoreList":[]}