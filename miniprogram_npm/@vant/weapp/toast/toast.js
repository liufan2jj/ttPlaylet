"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var validator_1=require("../common/validator"),defaultOptions={type:"text",mask:!1,message:"",show:!0,zIndex:1e3,duration:2e3,position:"middle",forbidClick:!1,loadingType:"circular",selector:"#van-toast"},queue=[],currentOptions=__assign({},defaultOptions);function parseOptions(t){return(0,validator_1.isObj)(t)?t:{message:t}}function getContext(){var t=getCurrentPages();return t[t.length-1]}function Toast(t){var e=__assign(__assign({},currentOptions),parseOptions(t)),n=(("function"==typeof e.context?e.context():e.context)||getContext()).selectComponent(e.selector);if(n)return delete e.context,delete e.selector,n.clear=function(){n.setData({show:!1}),e.onClose&&e.onClose()},queue.push(n),n.setData(e),clearTimeout(n.timer),null!=e.duration&&e.duration>0&&(n.timer=setTimeout((function(){n.clear(),queue=queue.filter((function(t){return t!==n}))}),e.duration)),n;console.warn("未找到 van-toast 节点，请确认 selector 及 context 是否正确")}var createMethod=function(t){return function(e){return Toast(__assign({type:t},parseOptions(e)))}};Toast.loading=createMethod("loading"),Toast.success=createMethod("success"),Toast.fail=createMethod("fail"),Toast.clear=function(){queue.forEach((function(t){t.clear()})),queue=[]},Toast.setDefaultOptions=function(t){Object.assign(currentOptions,t)},Toast.resetDefaultOptions=function(){currentOptions=__assign({},defaultOptions)},exports.default=Toast;
//# sourceMappingURL=toast.js.map