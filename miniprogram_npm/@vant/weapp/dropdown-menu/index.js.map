{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\dropdown-menu\\index.js","names":["Object","defineProperty","exports","value","component_1","require","relation_1","utils_1","ARRAY","VantComponent","field","classes","relation","useChildren","this","updateItemListData","props","activeColor","type","String","observer","overlay","Boolean","zIndex","Number","duration","direction","safeAreaTabBar","closeOnClickOverlay","closeOnClickOutside","data","itemListData","beforeCreate","windowHeight","getSystemInfoSync","push","destroyed","_this","filter","item","methods","setData","children","map","child","updateChildrenData","forEach","updateDataFromParent","toggleItem","active","index","showPopup","toggle","immediate","close","getChildWrapperStyle","_a","getRect","then","rect","top","_b","bottom","offset","wrapperStyle","concat","addUnit","onTitleTap","event","currentTarget","dataset","disabled","menuItem"],"sources":["node_modules\\@vant\\weapp\\lib\\dropdown-menu\\index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar relation_1 = require(\"../common/relation\");\nvar utils_1 = require(\"../common/utils\");\nvar ARRAY = [];\n(0, component_1.VantComponent)({\n    field: true,\n    classes: ['title-class'],\n    relation: (0, relation_1.useChildren)('dropdown-item', function () {\n        this.updateItemListData();\n    }),\n    props: {\n        activeColor: {\n            type: String,\n            observer: 'updateChildrenData',\n        },\n        overlay: {\n            type: Boolean,\n            value: true,\n            observer: 'updateChildrenData',\n        },\n        zIndex: {\n            type: Number,\n            value: 10,\n        },\n        duration: {\n            type: Number,\n            value: 200,\n            observer: 'updateChildrenData',\n        },\n        direction: {\n            type: String,\n            value: 'down',\n            observer: 'updateChildrenData',\n        },\n        safeAreaTabBar: {\n            type: Boolean,\n            value: false,\n        },\n        closeOnClickOverlay: {\n            type: Boolean,\n            value: true,\n            observer: 'updateChildrenData',\n        },\n        closeOnClickOutside: {\n            type: Boolean,\n            value: true,\n        },\n    },\n    data: {\n        itemListData: [],\n    },\n    beforeCreate: function () {\n        var windowHeight = (0, utils_1.getSystemInfoSync)().windowHeight;\n        this.windowHeight = windowHeight;\n        ARRAY.push(this);\n    },\n    destroyed: function () {\n        var _this = this;\n        ARRAY = ARRAY.filter(function (item) { return item !== _this; });\n    },\n    methods: {\n        updateItemListData: function () {\n            this.setData({\n                itemListData: this.children.map(function (child) { return child.data; }),\n            });\n        },\n        updateChildrenData: function () {\n            this.children.forEach(function (child) {\n                child.updateDataFromParent();\n            });\n        },\n        toggleItem: function (active) {\n            this.children.forEach(function (item, index) {\n                var showPopup = item.data.showPopup;\n                if (index === active) {\n                    item.toggle();\n                }\n                else if (showPopup) {\n                    item.toggle(false, { immediate: true });\n                }\n            });\n        },\n        close: function () {\n            this.children.forEach(function (child) {\n                child.toggle(false, { immediate: true });\n            });\n        },\n        getChildWrapperStyle: function () {\n            var _this = this;\n            var _a = this.data, zIndex = _a.zIndex, direction = _a.direction;\n            return (0, utils_1.getRect)(this, '.van-dropdown-menu').then(function (rect) {\n                var _a = rect.top, top = _a === void 0 ? 0 : _a, _b = rect.bottom, bottom = _b === void 0 ? 0 : _b;\n                var offset = direction === 'down' ? bottom : _this.windowHeight - top;\n                var wrapperStyle = \"z-index: \".concat(zIndex, \";\");\n                if (direction === 'down') {\n                    wrapperStyle += \"top: \".concat((0, utils_1.addUnit)(offset), \";\");\n                }\n                else {\n                    wrapperStyle += \"bottom: \".concat((0, utils_1.addUnit)(offset), \";\");\n                }\n                return wrapperStyle;\n            });\n        },\n        onTitleTap: function (event) {\n            var _this = this;\n            var index = event.currentTarget.dataset.index;\n            var child = this.children[index];\n            if (!child.data.disabled) {\n                ARRAY.forEach(function (menuItem) {\n                    if (menuItem &&\n                        menuItem.data.closeOnClickOutside &&\n                        menuItem !== _this) {\n                        menuItem.close();\n                    }\n                });\n                this.toggleItem(index);\n            }\n        },\n    },\n});\n"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtD,IAAIC,YAAcC,QAAQ,uBACtBC,WAAaD,QAAQ,sBACrBE,QAAUF,QAAQ,mBAClBG,MAAQ,IACZ,EAAIJ,YAAYK,eAAe,CAC3BC,OAAO,EACPC,QAAS,CAAC,eACVC,UAAU,EAAIN,WAAWO,aAAa,iBAAiB,WACnDC,KAAKC,oBACT,IACAC,MAAO,CACHC,YAAa,CACTC,KAAMC,OACNC,SAAU,sBAEdC,QAAS,CACLH,KAAMI,QACNnB,OAAO,EACPiB,SAAU,sBAEdG,OAAQ,CACJL,KAAMM,OACNrB,MAAO,IAEXsB,SAAU,CACNP,KAAMM,OACNrB,MAAO,IACPiB,SAAU,sBAEdM,UAAW,CACPR,KAAMC,OACNhB,MAAO,OACPiB,SAAU,sBAEdO,eAAgB,CACZT,KAAMI,QACNnB,OAAO,GAEXyB,oBAAqB,CACjBV,KAAMI,QACNnB,OAAO,EACPiB,SAAU,sBAEdS,oBAAqB,CACjBX,KAAMI,QACNnB,OAAO,IAGf2B,KAAM,CACFC,aAAc,IAElBC,aAAc,WACV,IAAIC,GAAe,EAAI1B,QAAQ2B,qBAAqBD,aACpDnB,KAAKmB,aAAeA,EACpBzB,MAAM2B,KAAKrB,KACf,EACAsB,UAAW,WACP,IAAIC,EAAQvB,KACZN,MAAQA,MAAM8B,QAAO,SAAUC,GAAQ,OAAOA,IAASF,CAAO,GAClE,EACAG,QAAS,CACLzB,mBAAoB,WAChBD,KAAK2B,QAAQ,CACTV,aAAcjB,KAAK4B,SAASC,KAAI,SAAUC,GAAS,OAAOA,EAAMd,IAAM,KAE9E,EACAe,mBAAoB,WAChB/B,KAAK4B,SAASI,SAAQ,SAAUF,GAC5BA,EAAMG,sBACV,GACJ,EACAC,WAAY,SAAUC,GAClBnC,KAAK4B,SAASI,SAAQ,SAAUP,EAAMW,GAClC,IAAIC,EAAYZ,EAAKT,KAAKqB,UACtBD,IAAUD,EACVV,EAAKa,SAEAD,GACLZ,EAAKa,QAAO,EAAO,CAAEC,WAAW,GAExC,GACJ,EACAC,MAAO,WACHxC,KAAK4B,SAASI,SAAQ,SAAUF,GAC5BA,EAAMQ,QAAO,EAAO,CAAEC,WAAW,GACrC,GACJ,EACAE,qBAAsB,WAClB,IAAIlB,EAAQvB,KACR0C,EAAK1C,KAAKgB,KAAMP,EAASiC,EAAGjC,OAAQG,EAAY8B,EAAG9B,UACvD,OAAO,EAAInB,QAAQkD,SAAS3C,KAAM,sBAAsB4C,MAAK,SAAUC,GACnE,IAAIH,EAAKG,EAAKC,IAAKA,OAAa,IAAPJ,EAAgB,EAAIA,EAAIK,EAAKF,EAAKG,OACvDC,EAAuB,SAAdrC,OADsE,IAAPmC,EAAgB,EAAIA,EACnDxB,EAAMJ,aAAe2B,EAC9DI,EAAe,YAAYC,OAAO1C,EAAQ,KAO9C,OALIyC,GADc,SAAdtC,EACgB,QAAQuC,QAAO,EAAI1D,QAAQ2D,SAASH,GAAS,KAG7C,WAAWE,QAAO,EAAI1D,QAAQ2D,SAASH,GAAS,IAGxE,GACJ,EACAI,WAAY,SAAUC,GAClB,IAAI/B,EAAQvB,KACRoC,EAAQkB,EAAMC,cAAcC,QAAQpB,MAC5BpC,KAAK4B,SAASQ,GACfpB,KAAKyC,WACZ/D,MAAMsC,SAAQ,SAAU0B,GAChBA,GACAA,EAAS1C,KAAKD,qBACd2C,IAAanC,GACbmC,EAASlB,OAEjB,IACAxC,KAAKkC,WAAWE,GAExB","ignoreList":[]}