{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\slider\\index.js","names":["Object","defineProperty","exports","value","component_1","require","touch_1","version_1","utils_1","DRAG_STATUS","START","MOVING","END","VantComponent","mixins","touch","props","range","Boolean","disabled","useButtonSlot","activeColor","String","inactiveColor","max","type","Number","min","step","observer","val","this","updateValue","vertical","barHeight","created","data","methods","onTouchStart","event","_this","index","currentTarget","dataset","buttonIndex","touchStart","startValue","format","newValue","isRange","map","dragStatus","onTouchMove","$emit","touchMove","getRect","then","rect","diff","deltaY","deltaX","height","width","getRange","onTouchEnd","nextTick","onClick","touches","delta","clientY","top","clientX","left","total","_a","right","Array","isArray","handleOverlap","slice","reverse","end","drag","mainAxis","setData","wrapperStyle","concat","addUnit","barStyle","calcMainAxis","calcOffset","canIUseModel","getScope","getOffsetWidth","current","scope","Math","clamp","round","addNumber"],"sources":["node_modules\\@vant\\weapp\\lib\\slider\\index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar touch_1 = require(\"../mixins/touch\");\nvar version_1 = require(\"../common/version\");\nvar utils_1 = require(\"../common/utils\");\nvar DRAG_STATUS = {\n    START: 'start',\n    MOVING: 'moving',\n    END: 'end',\n};\n(0, component_1.VantComponent)({\n    mixins: [touch_1.touch],\n    props: {\n        range: Boolean,\n        disabled: Boolean,\n        useButtonSlot: Boolean,\n        activeColor: String,\n        inactiveColor: String,\n        max: {\n            type: Number,\n            value: 100,\n        },\n        min: {\n            type: Number,\n            value: 0,\n        },\n        step: {\n            type: Number,\n            value: 1,\n        },\n        value: {\n            type: null,\n            value: 0,\n            observer: function (val) {\n                if (val !== this.value) {\n                    this.updateValue(val);\n                }\n            },\n        },\n        vertical: Boolean,\n        barHeight: null,\n    },\n    created: function () {\n        this.updateValue(this.data.value);\n    },\n    methods: {\n        onTouchStart: function (event) {\n            var _this = this;\n            if (this.data.disabled)\n                return;\n            var index = event.currentTarget.dataset.index;\n            if (typeof index === 'number') {\n                this.buttonIndex = index;\n            }\n            this.touchStart(event);\n            this.startValue = this.format(this.value);\n            this.newValue = this.value;\n            if (this.isRange(this.newValue)) {\n                this.startValue = this.newValue.map(function (val) { return _this.format(val); });\n            }\n            else {\n                this.startValue = this.format(this.newValue);\n            }\n            this.dragStatus = DRAG_STATUS.START;\n        },\n        onTouchMove: function (event) {\n            var _this = this;\n            if (this.data.disabled)\n                return;\n            if (this.dragStatus === DRAG_STATUS.START) {\n                this.$emit('drag-start');\n            }\n            this.touchMove(event);\n            this.dragStatus = DRAG_STATUS.MOVING;\n            (0, utils_1.getRect)(this, '.van-slider').then(function (rect) {\n                var vertical = _this.data.vertical;\n                var delta = vertical ? _this.deltaY : _this.deltaX;\n                var total = vertical ? rect.height : rect.width;\n                var diff = (delta / total) * _this.getRange();\n                if (_this.isRange(_this.startValue)) {\n                    _this.newValue[_this.buttonIndex] =\n                        _this.startValue[_this.buttonIndex] + diff;\n                }\n                else {\n                    _this.newValue = _this.startValue + diff;\n                }\n                _this.updateValue(_this.newValue, false, true);\n            });\n        },\n        onTouchEnd: function () {\n            var _this = this;\n            if (this.data.disabled)\n                return;\n            if (this.dragStatus === DRAG_STATUS.MOVING) {\n                this.dragStatus = DRAG_STATUS.END;\n                (0, utils_1.nextTick)(function () {\n                    _this.updateValue(_this.newValue, true);\n                    _this.$emit('drag-end');\n                });\n            }\n        },\n        onClick: function (event) {\n            var _this = this;\n            if (this.data.disabled)\n                return;\n            var min = this.data.min;\n            (0, utils_1.getRect)(this, '.van-slider').then(function (rect) {\n                var vertical = _this.data.vertical;\n                var touch = event.touches[0];\n                var delta = vertical\n                    ? touch.clientY - rect.top\n                    : touch.clientX - rect.left;\n                var total = vertical ? rect.height : rect.width;\n                var value = Number(min) + (delta / total) * _this.getRange();\n                if (_this.isRange(_this.value)) {\n                    var _a = _this.value, left = _a[0], right = _a[1];\n                    var middle = (left + right) / 2;\n                    if (value <= middle) {\n                        _this.updateValue([value, right], true);\n                    }\n                    else {\n                        _this.updateValue([left, value], true);\n                    }\n                }\n                else {\n                    _this.updateValue(value, true);\n                }\n            });\n        },\n        isRange: function (val) {\n            var range = this.data.range;\n            return range && Array.isArray(val);\n        },\n        handleOverlap: function (value) {\n            if (value[0] > value[1]) {\n                return value.slice(0).reverse();\n            }\n            return value;\n        },\n        updateValue: function (value, end, drag) {\n            var _this = this;\n            if (this.isRange(value)) {\n                value = this.handleOverlap(value).map(function (val) { return _this.format(val); });\n            }\n            else {\n                value = this.format(value);\n            }\n            this.value = value;\n            var vertical = this.data.vertical;\n            var mainAxis = vertical ? 'height' : 'width';\n            this.setData({\n                wrapperStyle: \"\\n          background: \".concat(this.data.inactiveColor || '', \";\\n          \").concat(vertical ? 'width' : 'height', \": \").concat((0, utils_1.addUnit)(this.data.barHeight) || '', \";\\n        \"),\n                barStyle: \"\\n          \".concat(mainAxis, \": \").concat(this.calcMainAxis(), \";\\n          left: \").concat(vertical ? 0 : this.calcOffset(), \";\\n          top: \").concat(vertical ? this.calcOffset() : 0, \";\\n          \").concat(drag ? 'transition: none;' : '', \"\\n        \"),\n            });\n            if (drag) {\n                this.$emit('drag', { value: value });\n            }\n            if (end) {\n                this.$emit('change', value);\n            }\n            if ((drag || end) && (0, version_1.canIUseModel)()) {\n                this.setData({ value: value });\n            }\n        },\n        getScope: function () {\n            return Number(this.data.max) - Number(this.data.min);\n        },\n        getRange: function () {\n            var _a = this.data, max = _a.max, min = _a.min;\n            return max - min;\n        },\n        getOffsetWidth: function (current, min) {\n            var scope = this.getScope();\n            // 避免最小值小于最小step时出现负数情况\n            return \"\".concat(Math.max(((current - min) * 100) / scope, 0), \"%\");\n        },\n        // 计算选中条的长度百分比\n        calcMainAxis: function () {\n            var value = this.value;\n            var min = this.data.min;\n            if (this.isRange(value)) {\n                return this.getOffsetWidth(value[1], value[0]);\n            }\n            return this.getOffsetWidth(value, Number(min));\n        },\n        // 计算选中条的开始位置的偏移量\n        calcOffset: function () {\n            var value = this.value;\n            var min = this.data.min;\n            var scope = this.getScope();\n            if (this.isRange(value)) {\n                return \"\".concat(((value[0] - Number(min)) * 100) / scope, \"%\");\n            }\n            return '0%';\n        },\n        format: function (value) {\n            var min = +this.data.min;\n            var max = +this.data.max;\n            var step = +this.data.step;\n            value = (0, utils_1.clamp)(value, min, max);\n            var diff = Math.round((value - min) / step) * step;\n            return (0, utils_1.addNumber)(min, diff);\n        },\n    },\n});\n"],"mappings":"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","ignoreList":[]}