{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\picker-column\\index.js","names":["Object","defineProperty","exports","value","component_1","require","utils_1","validator_1","DEFAULT_DURATION","VantComponent","classes","props","valueKey","String","className","itemHeight","Number","visibleItemCount","initialOptions","type","Array","defaultIndex","observer","this","setIndex","data","startY","offset","duration","startOffset","options","currentIndex","created","_this","_a","set","then","methods","getCount","length","onTouchStart","event","setData","touches","clientY","onTouchMove","deltaY","range","onTouchEnd","index","Math","round","onClickItem","currentTarget","dataset","adjustIndex","count","i","isDisabled","option","isObj","disabled","getOptionText","userAction","$emit","setValue","Promise","resolve","getValue"],"sources":["node_modules\\@vant\\weapp\\lib\\picker-column\\index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar utils_1 = require(\"../common/utils\");\nvar validator_1 = require(\"../common/validator\");\nvar DEFAULT_DURATION = 200;\n(0, component_1.VantComponent)({\n    classes: ['active-class'],\n    props: {\n        valueKey: String,\n        className: String,\n        itemHeight: Number,\n        visibleItemCount: Number,\n        initialOptions: {\n            type: Array,\n            value: [],\n        },\n        defaultIndex: {\n            type: Number,\n            value: 0,\n            observer: function (value) {\n                this.setIndex(value);\n            },\n        },\n    },\n    data: {\n        startY: 0,\n        offset: 0,\n        duration: 0,\n        startOffset: 0,\n        options: [],\n        currentIndex: 0,\n    },\n    created: function () {\n        var _this = this;\n        var _a = this.data, defaultIndex = _a.defaultIndex, initialOptions = _a.initialOptions;\n        this.set({\n            currentIndex: defaultIndex,\n            options: initialOptions,\n        }).then(function () {\n            _this.setIndex(defaultIndex);\n        });\n    },\n    methods: {\n        getCount: function () {\n            return this.data.options.length;\n        },\n        onTouchStart: function (event) {\n            this.setData({\n                startY: event.touches[0].clientY,\n                startOffset: this.data.offset,\n                duration: 0,\n            });\n        },\n        onTouchMove: function (event) {\n            var data = this.data;\n            var deltaY = event.touches[0].clientY - data.startY;\n            this.setData({\n                offset: (0, utils_1.range)(data.startOffset + deltaY, -(this.getCount() * data.itemHeight), data.itemHeight),\n            });\n        },\n        onTouchEnd: function () {\n            var data = this.data;\n            if (data.offset !== data.startOffset) {\n                this.setData({ duration: DEFAULT_DURATION });\n                var index = (0, utils_1.range)(Math.round(-data.offset / data.itemHeight), 0, this.getCount() - 1);\n                this.setIndex(index, true);\n            }\n        },\n        onClickItem: function (event) {\n            var index = event.currentTarget.dataset.index;\n            this.setIndex(index, true);\n        },\n        adjustIndex: function (index) {\n            var data = this.data;\n            var count = this.getCount();\n            index = (0, utils_1.range)(index, 0, count);\n            for (var i = index; i < count; i++) {\n                if (!this.isDisabled(data.options[i]))\n                    return i;\n            }\n            for (var i = index - 1; i >= 0; i--) {\n                if (!this.isDisabled(data.options[i]))\n                    return i;\n            }\n        },\n        isDisabled: function (option) {\n            return (0, validator_1.isObj)(option) && option.disabled;\n        },\n        getOptionText: function (option) {\n            var data = this.data;\n            return (0, validator_1.isObj)(option) && data.valueKey in option\n                ? option[data.valueKey]\n                : option;\n        },\n        setIndex: function (index, userAction) {\n            var _this = this;\n            var data = this.data;\n            index = this.adjustIndex(index) || 0;\n            var offset = -index * data.itemHeight;\n            if (index !== data.currentIndex) {\n                return this.set({ offset: offset, currentIndex: index }).then(function () {\n                    userAction && _this.$emit('change', index);\n                });\n            }\n            return this.set({ offset: offset });\n        },\n        setValue: function (value) {\n            var options = this.data.options;\n            for (var i = 0; i < options.length; i++) {\n                if (this.getOptionText(options[i]) === value) {\n                    return this.setIndex(i);\n                }\n            }\n            return Promise.resolve();\n        },\n        getValue: function () {\n            var data = this.data;\n            return data.options[data.currentIndex];\n        },\n    },\n});\n"],"mappings":"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","ignoreList":[]}