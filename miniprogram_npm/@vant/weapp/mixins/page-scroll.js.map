{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\mixins\\page-scroll.js","names":["Object","defineProperty","exports","value","pageScrollMixin","validator_1","require","utils_1","onPageScroll","event","_a","getCurrentPage","vanPageScroller","forEach","scroller","Behavior","attached","page","isDef","_scroller","bind","this","isFunction","push","detached","_this","index","findIndex","v","splice","undefined"],"sources":["node_modules\\@vant\\weapp\\lib\\mixins\\page-scroll.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pageScrollMixin = void 0;\nvar validator_1 = require(\"../common/validator\");\nvar utils_1 = require(\"../common/utils\");\nfunction onPageScroll(event) {\n    var _a = (0, utils_1.getCurrentPage)().vanPageScroller, vanPageScroller = _a === void 0 ? [] : _a;\n    vanPageScroller.forEach(function (scroller) {\n        if (typeof scroller === 'function') {\n            // @ts-ignore\n            scroller(event);\n        }\n    });\n}\nfunction pageScrollMixin(scroller) {\n    return Behavior({\n        attached: function () {\n            var page = (0, utils_1.getCurrentPage)();\n            if (!(0, utils_1.isDef)(page)) {\n                return;\n            }\n            var _scroller = scroller.bind(this);\n            var _a = page.vanPageScroller, vanPageScroller = _a === void 0 ? [] : _a;\n            if ((0, validator_1.isFunction)(page.onPageScroll) && page.onPageScroll !== onPageScroll) {\n                vanPageScroller.push(page.onPageScroll.bind(page));\n            }\n            vanPageScroller.push(_scroller);\n            page.vanPageScroller = vanPageScroller;\n            page.onPageScroll = onPageScroll;\n            this._scroller = _scroller;\n        },\n        detached: function () {\n            var _this = this;\n            var page = (0, utils_1.getCurrentPage)();\n            if (!(0, utils_1.isDef)(page) || !(0, utils_1.isDef)(page.vanPageScroller)) {\n                return;\n            }\n            var vanPageScroller = page.vanPageScroller;\n            var index = vanPageScroller.findIndex(function (v) { return v === _this._scroller; });\n            if (index > -1) {\n                page.vanPageScroller.splice(index, 1);\n            }\n            this._scroller = undefined;\n        },\n    });\n}\nexports.pageScrollMixin = pageScrollMixin;\n"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtDD,QAAQE,qBAAkB,EAC1B,IAAIC,YAAcC,QAAQ,uBACtBC,QAAUD,QAAQ,mBACtB,SAASE,aAAaC,GAClB,IAAIC,GAAK,EAAIH,QAAQI,kBAAkBC,sBAA0C,IAAPF,EAAgB,GAAKA,GAC/EG,SAAQ,SAAUC,GACN,mBAAbA,GAEPA,EAASL,EAEjB,GACJ,CACA,SAASL,gBAAgBU,GACrB,OAAOC,SAAS,CACZC,SAAU,WACN,IAAIC,GAAO,EAAIV,QAAQI,kBACvB,IAAK,EAAIJ,QAAQW,OAAOD,GAAxB,CAGA,IAAIE,EAAYL,EAASM,KAAKC,MAC1BX,EAAKO,EAAKL,gBAAiBA,OAAyB,IAAPF,EAAgB,GAAKA,GAClE,EAAIL,YAAYiB,YAAYL,EAAKT,eAAiBS,EAAKT,eAAiBA,cACxEI,EAAgBW,KAAKN,EAAKT,aAAaY,KAAKH,IAEhDL,EAAgBW,KAAKJ,GACrBF,EAAKL,gBAAkBA,EACvBK,EAAKT,aAAeA,aACpBa,KAAKF,UAAYA,CATjB,CAUJ,EACAK,SAAU,WACN,IAAIC,EAAQJ,KACRJ,GAAO,EAAIV,QAAQI,kBACvB,IAAK,EAAIJ,QAAQW,OAAOD,KAAU,EAAIV,QAAQW,OAAOD,EAAKL,iBAA1D,CAGA,IACIc,EADkBT,EAAKL,gBACCe,WAAU,SAAUC,GAAK,OAAOA,IAAMH,EAAMN,SAAW,IAC/EO,GAAS,GACTT,EAAKL,gBAAgBiB,OAAOH,EAAO,GAEvCL,KAAKF,eAAYW,CANjB,CAOJ,GAER,CACA5B,QAAQE,gBAAkBA","ignoreList":[]}