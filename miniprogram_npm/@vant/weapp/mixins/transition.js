"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transition=void 0;var utils_1=require("../common/utils"),validator_1=require("../common/validator"),getClassNames=function(e){return{enter:"van-".concat(e,"-enter van-").concat(e,"-enter-active enter-class enter-active-class"),"enter-to":"van-".concat(e,"-enter-to van-").concat(e,"-enter-active enter-to-class enter-active-class"),leave:"van-".concat(e,"-leave van-").concat(e,"-leave-active leave-class leave-active-class"),"leave-to":"van-".concat(e,"-leave-to van-").concat(e,"-leave-active leave-to-class leave-active-class")}};function transition(e){return Behavior({properties:{customStyle:String,show:{type:Boolean,value:e,observer:"observeShow"},duration:{type:null,value:300},name:{type:String,value:"fade"}},data:{type:"",inited:!1,display:!1},ready:function(){!0===this.data.show&&this.observeShow(!0,!1)},methods:{observeShow:function(e,t){e!==t&&(e?this.enter():this.leave())},enter:function(){var e=this;this.enterFinishedPromise||(this.enterFinishedPromise=new Promise((function(t){var a=e.data,n=a.duration,s=a.name,i=getClassNames(s),r=(0,validator_1.isObj)(n)?n.enter:n;"enter"!==e.status&&(e.status="enter",e.$emit("before-enter"),(0,utils_1.requestAnimationFrame)((function(){"enter"===e.status&&(e.$emit("enter"),e.setData({inited:!0,display:!0,classes:i.enter,currentDuration:r}),(0,utils_1.requestAnimationFrame)((function(){"enter"===e.status&&(e.transitionEnded=!1,e.setData({classes:i["enter-to"]}),t())})))})))})))},leave:function(){var e=this;this.enterFinishedPromise&&this.enterFinishedPromise.then((function(){if(e.data.display){var t=e.data,a=t.duration,n=t.name,s=getClassNames(n),i=(0,validator_1.isObj)(a)?a.leave:a;e.status="leave",e.$emit("before-leave"),(0,utils_1.requestAnimationFrame)((function(){"leave"===e.status&&(e.$emit("leave"),e.setData({classes:s.leave,currentDuration:i}),(0,utils_1.requestAnimationFrame)((function(){"leave"===e.status&&(e.transitionEnded=!1,setTimeout((function(){e.onTransitionEnd(),e.enterFinishedPromise=null}),i),e.setData({classes:s["leave-to"]}))})))}))}}))},onTransitionEnd:function(){if(!this.transitionEnded){this.transitionEnded=!0,this.$emit("after-".concat(this.status));var e=this.data,t=e.show,a=e.display;!t&&a&&this.setData({display:!1})}}}})}exports.transition=transition;
//# sourceMappingURL=transition.js.map