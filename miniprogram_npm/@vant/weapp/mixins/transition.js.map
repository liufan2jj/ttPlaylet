{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\mixins\\transition.js","names":["Object","defineProperty","exports","value","transition","utils_1","require","validator_1","getClassNames","name","enter","concat","leave","showDefaultValue","Behavior","properties","customStyle","String","show","type","Boolean","observer","duration","data","inited","display","ready","this","observeShow","methods","old","_this","enterFinishedPromise","Promise","resolve","_a","classNames","currentDuration","isObj","status","$emit","requestAnimationFrame","setData","classes","transitionEnded","then","setTimeout","onTransitionEnd"],"sources":["node_modules\\@vant\\weapp\\lib\\mixins\\transition.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transition = void 0;\n// @ts-nocheck\nvar utils_1 = require(\"../common/utils\");\nvar validator_1 = require(\"../common/validator\");\nvar getClassNames = function (name) { return ({\n    enter: \"van-\".concat(name, \"-enter van-\").concat(name, \"-enter-active enter-class enter-active-class\"),\n    'enter-to': \"van-\".concat(name, \"-enter-to van-\").concat(name, \"-enter-active enter-to-class enter-active-class\"),\n    leave: \"van-\".concat(name, \"-leave van-\").concat(name, \"-leave-active leave-class leave-active-class\"),\n    'leave-to': \"van-\".concat(name, \"-leave-to van-\").concat(name, \"-leave-active leave-to-class leave-active-class\"),\n}); };\nfunction transition(showDefaultValue) {\n    return Behavior({\n        properties: {\n            customStyle: String,\n            // @ts-ignore\n            show: {\n                type: Boolean,\n                value: showDefaultValue,\n                observer: 'observeShow',\n            },\n            // @ts-ignore\n            duration: {\n                type: null,\n                value: 300,\n            },\n            name: {\n                type: String,\n                value: 'fade',\n            },\n        },\n        data: {\n            type: '',\n            inited: false,\n            display: false,\n        },\n        ready: function () {\n            if (this.data.show === true) {\n                this.observeShow(true, false);\n            }\n        },\n        methods: {\n            observeShow: function (value, old) {\n                if (value === old) {\n                    return;\n                }\n                value ? this.enter() : this.leave();\n            },\n            enter: function () {\n                var _this = this;\n                if (this.enterFinishedPromise)\n                    return;\n                this.enterFinishedPromise = new Promise(function (resolve) {\n                    var _a = _this.data, duration = _a.duration, name = _a.name;\n                    var classNames = getClassNames(name);\n                    var currentDuration = (0, validator_1.isObj)(duration) ? duration.enter : duration;\n                    if (_this.status === 'enter') {\n                        return;\n                    }\n                    _this.status = 'enter';\n                    _this.$emit('before-enter');\n                    (0, utils_1.requestAnimationFrame)(function () {\n                        if (_this.status !== 'enter') {\n                            return;\n                        }\n                        _this.$emit('enter');\n                        _this.setData({\n                            inited: true,\n                            display: true,\n                            classes: classNames.enter,\n                            currentDuration: currentDuration,\n                        });\n                        (0, utils_1.requestAnimationFrame)(function () {\n                            if (_this.status !== 'enter') {\n                                return;\n                            }\n                            _this.transitionEnded = false;\n                            _this.setData({ classes: classNames['enter-to'] });\n                            resolve();\n                        });\n                    });\n                });\n            },\n            leave: function () {\n                var _this = this;\n                if (!this.enterFinishedPromise)\n                    return;\n                this.enterFinishedPromise.then(function () {\n                    if (!_this.data.display) {\n                        return;\n                    }\n                    var _a = _this.data, duration = _a.duration, name = _a.name;\n                    var classNames = getClassNames(name);\n                    var currentDuration = (0, validator_1.isObj)(duration) ? duration.leave : duration;\n                    _this.status = 'leave';\n                    _this.$emit('before-leave');\n                    (0, utils_1.requestAnimationFrame)(function () {\n                        if (_this.status !== 'leave') {\n                            return;\n                        }\n                        _this.$emit('leave');\n                        _this.setData({\n                            classes: classNames.leave,\n                            currentDuration: currentDuration,\n                        });\n                        (0, utils_1.requestAnimationFrame)(function () {\n                            if (_this.status !== 'leave') {\n                                return;\n                            }\n                            _this.transitionEnded = false;\n                            setTimeout(function () {\n                                _this.onTransitionEnd();\n                                _this.enterFinishedPromise = null;\n                            }, currentDuration);\n                            _this.setData({ classes: classNames['leave-to'] });\n                        });\n                    });\n                });\n            },\n            onTransitionEnd: function () {\n                if (this.transitionEnded) {\n                    return;\n                }\n                this.transitionEnded = true;\n                this.$emit(\"after-\".concat(this.status));\n                var _a = this.data, show = _a.show, display = _a.display;\n                if (!show && display) {\n                    this.setData({ display: false });\n                }\n            },\n        },\n    });\n}\nexports.transition = transition;\n"],"mappings":"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","ignoreList":[]}