"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../common/component"),touch_1=require("../mixins/touch"),utils_1=require("../common/utils"),THRESHOLD=.3,ARRAY=[];(0,component_1.VantComponent)({props:{disabled:Boolean,leftWidth:{type:Number,value:0,observer:function(t){void 0===t&&(t=0),this.offset>0&&this.swipeMove(t)}},rightWidth:{type:Number,value:0,observer:function(t){void 0===t&&(t=0),this.offset<0&&this.swipeMove(-t)}},asyncClose:Boolean,name:{type:null,value:""}},mixins:[touch_1.touch],data:{catchMove:!1,wrapperStyle:""},created:function(){this.offset=0,ARRAY.push(this)},destroyed:function(){var t=this;ARRAY=ARRAY.filter((function(i){return i!==t}))},methods:{open:function(t){var i=this.data,e=i.leftWidth,s=i.rightWidth,o="left"===t?e:-s;this.swipeMove(o),this.$emit("open",{position:t,name:this.data.name})},close:function(){this.swipeMove(0)},swipeMove:function(t){void 0===t&&(t=0),this.offset=(0,utils_1.range)(t,-this.data.rightWidth,this.data.leftWidth);var i="translate3d(".concat(this.offset,"px, 0, 0)"),e=this.dragging?"none":"transform .6s cubic-bezier(0.18, 0.89, 0.32, 1)";this.setData({wrapperStyle:"\n        -webkit-transform: ".concat(i,";\n        -webkit-transition: ").concat(e,";\n        transform: ").concat(i,";\n        transition: ").concat(e,";\n      ")})},swipeLeaveTransition:function(){var t=this.data,i=t.leftWidth,e=t.rightWidth,s=this.offset;e>0&&-s>e*THRESHOLD?this.open("right"):i>0&&s>i*THRESHOLD?this.open("left"):this.swipeMove(0),this.setData({catchMove:!1})},startDrag:function(t){this.data.disabled||(this.startOffset=this.offset,this.touchStart(t))},noop:function(){},onDrag:function(t){var i=this;this.data.disabled||(this.touchMove(t),"horizontal"===this.direction&&(this.dragging=!0,ARRAY.filter((function(t){return t!==i&&0!==t.offset})).forEach((function(t){return t.close()})),this.setData({catchMove:!0}),this.swipeMove(this.startOffset+this.deltaX)))},endDrag:function(){this.data.disabled||(this.dragging=!1,this.swipeLeaveTransition())},onClick:function(t){var i=t.currentTarget.dataset.key,e=void 0===i?"outside":i;this.$emit("click",e),this.offset&&(this.data.asyncClose?this.$emit("close",{position:e,instance:this,name:this.data.name}):this.swipeMove(0))}}});
//# sourceMappingURL=index.js.map