{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\notice-bar\\index.js","names":["Object","defineProperty","exports","value","component_1","require","utils_1","VantComponent","props","text","type","String","observer","mode","url","openType","delay","Number","speed","scrollable","leftIcon","color","backgroundColor","background","wrapable","Boolean","data","show","created","this","resetAnimation","wx","createAnimation","duration","timingFunction","destroyed","timer","clearTimeout","mounted","init","methods","_this","requestAnimationFrame","Promise","all","getRect","then","rects","contentRect","wrapRect","_a","width","wrapWidth","contentWidth","animation","scroll","isInit","setData","animationData","translateX","step","export","setTimeout","onClickIcon","event","$emit","detail","onClick"],"sources":["node_modules\\@vant\\weapp\\lib\\notice-bar\\index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar utils_1 = require(\"../common/utils\");\n(0, component_1.VantComponent)({\n    props: {\n        text: {\n            type: String,\n            value: '',\n            observer: 'init',\n        },\n        mode: {\n            type: String,\n            value: '',\n        },\n        url: {\n            type: String,\n            value: '',\n        },\n        openType: {\n            type: String,\n            value: 'navigate',\n        },\n        delay: {\n            type: Number,\n            value: 1,\n        },\n        speed: {\n            type: Number,\n            value: 60,\n            observer: 'init',\n        },\n        scrollable: null,\n        leftIcon: {\n            type: String,\n            value: '',\n        },\n        color: String,\n        backgroundColor: String,\n        background: String,\n        wrapable: Boolean,\n    },\n    data: {\n        show: true,\n    },\n    created: function () {\n        this.resetAnimation = wx.createAnimation({\n            duration: 0,\n            timingFunction: 'linear',\n        });\n    },\n    destroyed: function () {\n        this.timer && clearTimeout(this.timer);\n    },\n    mounted: function () {\n        this.init();\n    },\n    methods: {\n        init: function () {\n            var _this = this;\n            (0, utils_1.requestAnimationFrame)(function () {\n                Promise.all([\n                    (0, utils_1.getRect)(_this, '.van-notice-bar__content'),\n                    (0, utils_1.getRect)(_this, '.van-notice-bar__wrap'),\n                ]).then(function (rects) {\n                    var contentRect = rects[0], wrapRect = rects[1];\n                    var _a = _this.data, speed = _a.speed, scrollable = _a.scrollable, delay = _a.delay;\n                    if (contentRect == null ||\n                        wrapRect == null ||\n                        !contentRect.width ||\n                        !wrapRect.width ||\n                        scrollable === false) {\n                        return;\n                    }\n                    if (scrollable || wrapRect.width < contentRect.width) {\n                        var duration = ((wrapRect.width + contentRect.width) / speed) * 1000;\n                        _this.wrapWidth = wrapRect.width;\n                        _this.contentWidth = contentRect.width;\n                        _this.duration = duration;\n                        _this.animation = wx.createAnimation({\n                            duration: duration,\n                            timingFunction: 'linear',\n                            delay: delay,\n                        });\n                        _this.scroll(true);\n                    }\n                });\n            });\n        },\n        scroll: function (isInit) {\n            var _this = this;\n            if (isInit === void 0) { isInit = false; }\n            this.timer && clearTimeout(this.timer);\n            this.timer = null;\n            this.setData({\n                animationData: this.resetAnimation\n                    .translateX(isInit ? 0 : this.wrapWidth)\n                    .step()\n                    .export(),\n            });\n            (0, utils_1.requestAnimationFrame)(function () {\n                _this.setData({\n                    animationData: _this.animation\n                        .translateX(-_this.contentWidth)\n                        .step()\n                        .export(),\n                });\n            });\n            this.timer = setTimeout(function () {\n                _this.scroll();\n            }, this.duration + this.data.delay);\n        },\n        onClickIcon: function (event) {\n            if (this.data.mode === 'closeable') {\n                this.timer && clearTimeout(this.timer);\n                this.timer = null;\n                this.setData({ show: false });\n                this.$emit('close', event.detail);\n            }\n        },\n        onClick: function (event) {\n            this.$emit('click', event);\n        },\n    },\n});\n"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtD,IAAIC,YAAcC,QAAQ,uBACtBC,QAAUD,QAAQ,oBACtB,EAAID,YAAYG,eAAe,CAC3BC,MAAO,CACHC,KAAM,CACFC,KAAMC,OACNR,MAAO,GACPS,SAAU,QAEdC,KAAM,CACFH,KAAMC,OACNR,MAAO,IAEXW,IAAK,CACDJ,KAAMC,OACNR,MAAO,IAEXY,SAAU,CACNL,KAAMC,OACNR,MAAO,YAEXa,MAAO,CACHN,KAAMO,OACNd,MAAO,GAEXe,MAAO,CACHR,KAAMO,OACNd,MAAO,GACPS,SAAU,QAEdO,WAAY,KACZC,SAAU,CACNV,KAAMC,OACNR,MAAO,IAEXkB,MAAOV,OACPW,gBAAiBX,OACjBY,WAAYZ,OACZa,SAAUC,SAEdC,KAAM,CACFC,MAAM,GAEVC,QAAS,WACLC,KAAKC,eAAiBC,GAAGC,gBAAgB,CACrCC,SAAU,EACVC,eAAgB,UAExB,EACAC,UAAW,WACPN,KAAKO,OAASC,aAAaR,KAAKO,MACpC,EACAE,QAAS,WACLT,KAAKU,MACT,EACAC,QAAS,CACLD,KAAM,WACF,IAAIE,EAAQZ,MACZ,EAAIvB,QAAQoC,wBAAuB,WAC/BC,QAAQC,IAAI,EACR,EAAItC,QAAQuC,SAASJ,EAAO,6BAC5B,EAAInC,QAAQuC,SAASJ,EAAO,2BAC7BK,MAAK,SAAUC,GACd,IAAIC,EAAcD,EAAM,GAAIE,EAAWF,EAAM,GACzCG,EAAKT,EAAMf,KAAMR,EAAQgC,EAAGhC,MAAOC,EAAa+B,EAAG/B,WAAYH,EAAQkC,EAAGlC,MAC9E,GAAmB,MAAfgC,GACY,MAAZC,GACCD,EAAYG,OACZF,EAASE,QACK,IAAfhC,IAGAA,GAAc8B,EAASE,MAAQH,EAAYG,OAAO,CAClD,IAAIlB,GAAagB,EAASE,MAAQH,EAAYG,OAASjC,EAAS,IAChEuB,EAAMW,UAAYH,EAASE,MAC3BV,EAAMY,aAAeL,EAAYG,MACjCV,EAAMR,SAAWA,EACjBQ,EAAMa,UAAYvB,GAAGC,gBAAgB,CACjCC,SAAUA,EACVC,eAAgB,SAChBlB,MAAOA,IAEXyB,EAAMc,QAAO,EACjB,CACJ,GACJ,GACJ,EACAA,OAAQ,SAAUC,GACd,IAAIf,EAAQZ,UACG,IAAX2B,IAAqBA,GAAS,GAClC3B,KAAKO,OAASC,aAAaR,KAAKO,OAChCP,KAAKO,MAAQ,KACbP,KAAK4B,QAAQ,CACTC,cAAe7B,KAAKC,eACf6B,WAAWH,EAAS,EAAI3B,KAAKuB,WAC7BQ,OACAC,YAET,EAAIvD,QAAQoC,wBAAuB,WAC/BD,EAAMgB,QAAQ,CACVC,cAAejB,EAAMa,UAChBK,YAAYlB,EAAMY,cAClBO,OACAC,UAEb,IACAhC,KAAKO,MAAQ0B,YAAW,WACpBrB,EAAMc,QACV,GAAG1B,KAAKI,SAAWJ,KAAKH,KAAKV,MACjC,EACA+C,YAAa,SAAUC,GACI,cAAnBnC,KAAKH,KAAKb,OACVgB,KAAKO,OAASC,aAAaR,KAAKO,OAChCP,KAAKO,MAAQ,KACbP,KAAK4B,QAAQ,CAAE9B,MAAM,IACrBE,KAAKoC,MAAM,QAASD,EAAME,QAElC,EACAC,QAAS,SAAUH,GACfnC,KAAKoC,MAAM,QAASD,EACxB","ignoreList":[]}