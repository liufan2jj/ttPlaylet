{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\stepper\\index.js","names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","component_1","require","validator_1","LONG_PRESS_START_TIME","LONG_PRESS_INTERVAL","add","num1","num2","cardinal","Math","pow","round","equal","value1","value2","String","VantComponent","field","classes","props","type","integer","Boolean","observer","disabled","inputWidth","buttonSize","asyncChange","disableInput","decimalLength","Number","min","max","MAX_SAFE_INTEGER","step","showPlus","showMinus","disablePlus","disableMinus","longPress","theme","alwaysEmbed","data","currentValue","watch","observeValue","created","setData","format","methods","check","val","isDisabled","_a","onFocus","event","$emit","detail","onBlur","emitChange","filter","replace","indexOf","split","isDef","toFixed","onInput","formatted","onChange","diff","longPressStep","_this","longPressTimer","setTimeout","onTap","currentTarget","dataset","onTouchStart","clearTimeout","isLongPress","onTouchEnd"],"sources":["node_modules\\@vant\\weapp\\lib\\stepper\\index.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar validator_1 = require(\"../common/validator\");\nvar LONG_PRESS_START_TIME = 600;\nvar LONG_PRESS_INTERVAL = 200;\n// add num and avoid float number\nfunction add(num1, num2) {\n    var cardinal = Math.pow(10, 10);\n    return Math.round((num1 + num2) * cardinal) / cardinal;\n}\nfunction equal(value1, value2) {\n    return String(value1) === String(value2);\n}\n(0, component_1.VantComponent)({\n    field: true,\n    classes: ['input-class', 'plus-class', 'minus-class'],\n    props: {\n        value: {\n            type: null,\n        },\n        integer: {\n            type: Boolean,\n            observer: 'check',\n        },\n        disabled: Boolean,\n        inputWidth: String,\n        buttonSize: String,\n        asyncChange: Boolean,\n        disableInput: Boolean,\n        decimalLength: {\n            type: Number,\n            value: null,\n            observer: 'check',\n        },\n        min: {\n            type: null,\n            value: 1,\n            observer: 'check',\n        },\n        max: {\n            type: null,\n            value: Number.MAX_SAFE_INTEGER,\n            observer: 'check',\n        },\n        step: {\n            type: null,\n            value: 1,\n        },\n        showPlus: {\n            type: Boolean,\n            value: true,\n        },\n        showMinus: {\n            type: Boolean,\n            value: true,\n        },\n        disablePlus: Boolean,\n        disableMinus: Boolean,\n        longPress: {\n            type: Boolean,\n            value: true,\n        },\n        theme: String,\n        alwaysEmbed: Boolean,\n    },\n    data: {\n        currentValue: '',\n    },\n    watch: {\n        value: function () {\n            this.observeValue();\n        },\n    },\n    created: function () {\n        this.setData({\n            currentValue: this.format(this.data.value),\n        });\n    },\n    methods: {\n        observeValue: function () {\n            var value = this.data.value;\n            this.setData({ currentValue: this.format(value) });\n        },\n        check: function () {\n            var val = this.format(this.data.currentValue);\n            if (!equal(val, this.data.currentValue)) {\n                this.setData({ currentValue: val });\n            }\n        },\n        isDisabled: function (type) {\n            var _a = this.data, disabled = _a.disabled, disablePlus = _a.disablePlus, disableMinus = _a.disableMinus, currentValue = _a.currentValue, max = _a.max, min = _a.min;\n            if (type === 'plus') {\n                return disabled || disablePlus || +currentValue >= +max;\n            }\n            return disabled || disableMinus || +currentValue <= +min;\n        },\n        onFocus: function (event) {\n            this.$emit('focus', event.detail);\n        },\n        onBlur: function (event) {\n            var value = this.format(event.detail.value);\n            this.setData({ currentValue: value });\n            this.emitChange(value);\n            this.$emit('blur', __assign(__assign({}, event.detail), { value: value }));\n        },\n        // filter illegal characters\n        filter: function (value) {\n            value = String(value).replace(/[^0-9.-]/g, '');\n            if (this.data.integer && value.indexOf('.') !== -1) {\n                value = value.split('.')[0];\n            }\n            return value;\n        },\n        // limit value range\n        format: function (value) {\n            value = this.filter(value);\n            // format range\n            value = value === '' ? 0 : +value;\n            value = Math.max(Math.min(this.data.max, value), this.data.min);\n            // format decimal\n            if ((0, validator_1.isDef)(this.data.decimalLength)) {\n                value = value.toFixed(this.data.decimalLength);\n            }\n            return value;\n        },\n        onInput: function (event) {\n            var _a = (event.detail || {}).value, value = _a === void 0 ? '' : _a;\n            // allow input to be empty\n            if (value === '') {\n                return;\n            }\n            var formatted = this.format(value);\n            this.emitChange(formatted);\n        },\n        emitChange: function (value) {\n            if (!this.data.asyncChange) {\n                this.setData({ currentValue: value });\n            }\n            this.$emit('change', value);\n        },\n        onChange: function () {\n            var type = this.type;\n            if (this.isDisabled(type)) {\n                this.$emit('overlimit', type);\n                return;\n            }\n            var diff = type === 'minus' ? -this.data.step : +this.data.step;\n            var value = this.format(add(+this.data.currentValue, diff));\n            this.emitChange(value);\n            this.$emit(type);\n        },\n        longPressStep: function () {\n            var _this = this;\n            this.longPressTimer = setTimeout(function () {\n                _this.onChange();\n                _this.longPressStep();\n            }, LONG_PRESS_INTERVAL);\n        },\n        onTap: function (event) {\n            var type = event.currentTarget.dataset.type;\n            this.type = type;\n            this.onChange();\n        },\n        onTouchStart: function (event) {\n            var _this = this;\n            if (!this.data.longPress) {\n                return;\n            }\n            clearTimeout(this.longPressTimer);\n            var type = event.currentTarget.dataset.type;\n            this.type = type;\n            this.isLongPress = false;\n            this.longPressTimer = setTimeout(function () {\n                _this.isLongPress = true;\n                _this.onChange();\n                _this.longPressStep();\n            }, LONG_PRESS_START_TIME);\n        },\n        onTouchEnd: function () {\n            if (!this.data.longPress) {\n                return;\n            }\n            clearTimeout(this.longPressTimer);\n        },\n    },\n});\n"],"mappings":"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","ignoreList":[]}