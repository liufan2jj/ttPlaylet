{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\count-down\\index.js","names":["Object","defineProperty","exports","value","component_1","require","utils_1","simpleTick","fn","setTimeout","VantComponent","props","useSlot","Boolean","millisecond","time","type","Number","observer","format","String","autoStart","data","timeData","parseTimeData","formattedTime","destroyed","clearTimeout","this","tid","methods","start","counting","endTime","Date","now","remain","tick","pause","reset","setRemain","microTick","macroTick","_this","getRemain","isSameSecond","Math","max","$emit","setData","parseFormat"],"sources":["node_modules\\@vant\\weapp\\lib\\count-down\\index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar utils_1 = require(\"./utils\");\nfunction simpleTick(fn) {\n    return setTimeout(fn, 30);\n}\n(0, component_1.VantComponent)({\n    props: {\n        useSlot: Boolean,\n        millisecond: Boolean,\n        time: {\n            type: Number,\n            observer: 'reset',\n        },\n        format: {\n            type: String,\n            value: 'HH:mm:ss',\n        },\n        autoStart: {\n            type: Boolean,\n            value: true,\n        },\n    },\n    data: {\n        timeData: (0, utils_1.parseTimeData)(0),\n        formattedTime: '0',\n    },\n    destroyed: function () {\n        clearTimeout(this.tid);\n        this.tid = null;\n    },\n    methods: {\n        // 开始\n        start: function () {\n            if (this.counting) {\n                return;\n            }\n            this.counting = true;\n            this.endTime = Date.now() + this.remain;\n            this.tick();\n        },\n        // 暂停\n        pause: function () {\n            this.counting = false;\n            clearTimeout(this.tid);\n        },\n        // 重置\n        reset: function () {\n            this.pause();\n            this.remain = this.data.time;\n            this.setRemain(this.remain);\n            if (this.data.autoStart) {\n                this.start();\n            }\n        },\n        tick: function () {\n            if (this.data.millisecond) {\n                this.microTick();\n            }\n            else {\n                this.macroTick();\n            }\n        },\n        microTick: function () {\n            var _this = this;\n            this.tid = simpleTick(function () {\n                _this.setRemain(_this.getRemain());\n                if (_this.remain !== 0) {\n                    _this.microTick();\n                }\n            });\n        },\n        macroTick: function () {\n            var _this = this;\n            this.tid = simpleTick(function () {\n                var remain = _this.getRemain();\n                if (!(0, utils_1.isSameSecond)(remain, _this.remain) || remain === 0) {\n                    _this.setRemain(remain);\n                }\n                if (_this.remain !== 0) {\n                    _this.macroTick();\n                }\n            });\n        },\n        getRemain: function () {\n            return Math.max(this.endTime - Date.now(), 0);\n        },\n        setRemain: function (remain) {\n            this.remain = remain;\n            var timeData = (0, utils_1.parseTimeData)(remain);\n            if (this.data.useSlot) {\n                this.$emit('change', timeData);\n            }\n            this.setData({\n                formattedTime: (0, utils_1.parseFormat)(this.data.format, timeData),\n            });\n            if (remain === 0) {\n                this.pause();\n                this.$emit('finish');\n            }\n        },\n    },\n});\n"],"mappings":"AAAA,aACAA,OAAOC,eAAeC,QAAS,aAAc,CAAEC,OAAO,IACtD,IAAIC,YAAcC,QAAQ,uBACtBC,QAAUD,QAAQ,WACtB,SAASE,WAAWC,GAChB,OAAOC,WAAWD,EAAI,GAC1B,EACA,EAAIJ,YAAYM,eAAe,CAC3BC,MAAO,CACHC,QAASC,QACTC,YAAaD,QACbE,KAAM,CACFC,KAAMC,OACNC,SAAU,SAEdC,OAAQ,CACJH,KAAMI,OACNjB,MAAO,YAEXkB,UAAW,CACPL,KAAMH,QACNV,OAAO,IAGfmB,KAAM,CACFC,UAAU,EAAIjB,QAAQkB,eAAe,GACrCC,cAAe,KAEnBC,UAAW,WACPC,aAAaC,KAAKC,KAClBD,KAAKC,IAAM,IACf,EACAC,QAAS,CAELC,MAAO,WACCH,KAAKI,WAGTJ,KAAKI,UAAW,EAChBJ,KAAKK,QAAUC,KAAKC,MAAQP,KAAKQ,OACjCR,KAAKS,OACT,EAEAC,MAAO,WACHV,KAAKI,UAAW,EAChBL,aAAaC,KAAKC,IACtB,EAEAU,MAAO,WACHX,KAAKU,QACLV,KAAKQ,OAASR,KAAKN,KAAKP,KACxBa,KAAKY,UAAUZ,KAAKQ,QAChBR,KAAKN,KAAKD,WACVO,KAAKG,OAEb,EACAM,KAAM,WACET,KAAKN,KAAKR,YACVc,KAAKa,YAGLb,KAAKc,WAEb,EACAD,UAAW,WACP,IAAIE,EAAQf,KACZA,KAAKC,IAAMtB,YAAW,WAClBoC,EAAMH,UAAUG,EAAMC,aACD,IAAjBD,EAAMP,QACNO,EAAMF,WAEd,GACJ,EACAC,UAAW,WACP,IAAIC,EAAQf,KACZA,KAAKC,IAAMtB,YAAW,WAClB,IAAI6B,EAASO,EAAMC,aACd,EAAItC,QAAQuC,cAAcT,EAAQO,EAAMP,SAAsB,IAAXA,GACpDO,EAAMH,UAAUJ,GAEC,IAAjBO,EAAMP,QACNO,EAAMD,WAEd,GACJ,EACAE,UAAW,WACP,OAAOE,KAAKC,IAAInB,KAAKK,QAAUC,KAAKC,MAAO,EAC/C,EACAK,UAAW,SAAUJ,GACjBR,KAAKQ,OAASA,EACd,IAAIb,GAAW,EAAIjB,QAAQkB,eAAeY,GACtCR,KAAKN,KAAKV,SACVgB,KAAKoB,MAAM,SAAUzB,GAEzBK,KAAKqB,QAAQ,CACTxB,eAAe,EAAInB,QAAQ4C,aAAatB,KAAKN,KAAKH,OAAQI,KAE/C,IAAXa,IACAR,KAAKU,QACLV,KAAKoB,MAAM,UAEnB","ignoreList":[]}