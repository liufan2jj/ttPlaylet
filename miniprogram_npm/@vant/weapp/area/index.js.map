{"version":3,"file":"node_modules\\@vant\\weapp\\lib\\area\\index.js","names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","component_1","require","shared_1","utils_1","EMPTY_CODE","VantComponent","classes","props","pickerProps","showToolbar","type","Boolean","String","observer","code","setValues","areaList","columnsNum","columnsPlaceholder","Array","val","setData","typeToColumnsPlaceholder","province","city","county","data","columns","values","mounted","_this","requestAnimationFrame","methods","getPicker","picker","selectComponent","onCancel","event","emit","detail","onConfirm","index","parseValues","$emit","map","name","onChange","_a","_b","then","getValues","getConfig","concat","getList","list","result","keys","filter","item","indexOf","codeFill","slice","unshift","getIndex","compareNum","getDefaultCode","provinceList","cityList","stack","indexes","push","setColumnValues","Promise","all","catch","setIndexes","countyCodes","cityCodes","getDetail","area","country","names","reset"],"sources":["node_modules\\@vant\\weapp\\lib\\area\\index.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar component_1 = require(\"../common/component\");\nvar shared_1 = require(\"../picker/shared\");\nvar utils_1 = require(\"../common/utils\");\nvar EMPTY_CODE = '000000';\n(0, component_1.VantComponent)({\n    classes: ['active-class', 'toolbar-class', 'column-class'],\n    props: __assign(__assign({}, shared_1.pickerProps), { showToolbar: {\n            type: Boolean,\n            value: true,\n        }, value: {\n            type: String,\n            observer: function (value) {\n                this.code = value;\n                this.setValues();\n            },\n        }, areaList: {\n            type: Object,\n            value: {},\n            observer: 'setValues',\n        }, columnsNum: {\n            type: null,\n            value: 3,\n        }, columnsPlaceholder: {\n            type: Array,\n            observer: function (val) {\n                this.setData({\n                    typeToColumnsPlaceholder: {\n                        province: val[0] || '',\n                        city: val[1] || '',\n                        county: val[2] || '',\n                    },\n                });\n            },\n        } }),\n    data: {\n        columns: [{ values: [] }, { values: [] }, { values: [] }],\n        typeToColumnsPlaceholder: {},\n    },\n    mounted: function () {\n        var _this = this;\n        (0, utils_1.requestAnimationFrame)(function () {\n            _this.setValues();\n        });\n    },\n    methods: {\n        getPicker: function () {\n            if (this.picker == null) {\n                this.picker = this.selectComponent('.van-area__picker');\n            }\n            return this.picker;\n        },\n        onCancel: function (event) {\n            this.emit('cancel', event.detail);\n        },\n        onConfirm: function (event) {\n            var index = event.detail.index;\n            var value = event.detail.value;\n            value = this.parseValues(value);\n            this.emit('confirm', { value: value, index: index });\n        },\n        emit: function (type, detail) {\n            detail.values = detail.value;\n            delete detail.value;\n            this.$emit(type, detail);\n        },\n        parseValues: function (values) {\n            var columnsPlaceholder = this.data.columnsPlaceholder;\n            return values.map(function (value, index) {\n                if (value &&\n                    (!value.code || value.name === columnsPlaceholder[index])) {\n                    return __assign(__assign({}, value), { code: '', name: '' });\n                }\n                return value;\n            });\n        },\n        onChange: function (event) {\n            var _this = this;\n            var _a;\n            var _b = event.detail, index = _b.index, picker = _b.picker, value = _b.value;\n            this.code = value[index].code;\n            (_a = this.setValues()) === null || _a === void 0 ? void 0 : _a.then(function () {\n                _this.$emit('change', {\n                    picker: picker,\n                    values: _this.parseValues(picker.getValues()),\n                    index: index,\n                });\n            });\n        },\n        getConfig: function (type) {\n            var areaList = this.data.areaList;\n            return (areaList && areaList[\"\".concat(type, \"_list\")]) || {};\n        },\n        getList: function (type, code) {\n            if (type !== 'province' && !code) {\n                return [];\n            }\n            var typeToColumnsPlaceholder = this.data.typeToColumnsPlaceholder;\n            var list = this.getConfig(type);\n            var result = Object.keys(list).map(function (code) { return ({\n                code: code,\n                name: list[code],\n            }); });\n            if (code != null) {\n                // oversea code\n                if (code[0] === '9' && type === 'city') {\n                    code = '9';\n                }\n                result = result.filter(function (item) { return item.code.indexOf(code) === 0; });\n            }\n            if (typeToColumnsPlaceholder[type] && result.length) {\n                // set columns placeholder\n                var codeFill = type === 'province'\n                    ? ''\n                    : type === 'city'\n                        ? EMPTY_CODE.slice(2, 4)\n                        : EMPTY_CODE.slice(4, 6);\n                result.unshift({\n                    code: \"\".concat(code).concat(codeFill),\n                    name: typeToColumnsPlaceholder[type],\n                });\n            }\n            return result;\n        },\n        getIndex: function (type, code) {\n            var compareNum = type === 'province' ? 2 : type === 'city' ? 4 : 6;\n            var list = this.getList(type, code.slice(0, compareNum - 2));\n            // oversea code\n            if (code[0] === '9' && type === 'province') {\n                compareNum = 1;\n            }\n            code = code.slice(0, compareNum);\n            for (var i = 0; i < list.length; i++) {\n                if (list[i].code.slice(0, compareNum) === code) {\n                    return i;\n                }\n            }\n            return 0;\n        },\n        setValues: function () {\n            var picker = this.getPicker();\n            if (!picker) {\n                return;\n            }\n            var code = this.code || this.getDefaultCode();\n            var provinceList = this.getList('province');\n            var cityList = this.getList('city', code.slice(0, 2));\n            var stack = [];\n            var indexes = [];\n            var columnsNum = this.data.columnsNum;\n            if (columnsNum >= 1) {\n                stack.push(picker.setColumnValues(0, provinceList, false));\n                indexes.push(this.getIndex('province', code));\n            }\n            if (columnsNum >= 2) {\n                stack.push(picker.setColumnValues(1, cityList, false));\n                indexes.push(this.getIndex('city', code));\n                if (cityList.length && code.slice(2, 4) === '00') {\n                    code = cityList[0].code;\n                }\n            }\n            if (columnsNum === 3) {\n                stack.push(picker.setColumnValues(2, this.getList('county', code.slice(0, 4)), false));\n                indexes.push(this.getIndex('county', code));\n            }\n            return Promise.all(stack)\n                .catch(function () { })\n                .then(function () { return picker.setIndexes(indexes); })\n                .catch(function () { });\n        },\n        getDefaultCode: function () {\n            var columnsPlaceholder = this.data.columnsPlaceholder;\n            if (columnsPlaceholder.length) {\n                return EMPTY_CODE;\n            }\n            var countyCodes = Object.keys(this.getConfig('county'));\n            if (countyCodes[0]) {\n                return countyCodes[0];\n            }\n            var cityCodes = Object.keys(this.getConfig('city'));\n            if (cityCodes[0]) {\n                return cityCodes[0];\n            }\n            return '';\n        },\n        getValues: function () {\n            var picker = this.getPicker();\n            if (!picker) {\n                return [];\n            }\n            return this.parseValues(picker.getValues().filter(function (value) { return !!value; }));\n        },\n        getDetail: function () {\n            var values = this.getValues();\n            var area = {\n                code: '',\n                country: '',\n                province: '',\n                city: '',\n                county: '',\n            };\n            if (!values.length) {\n                return area;\n            }\n            var names = values.map(function (item) { return item.name; });\n            area.code = values[values.length - 1].code;\n            if (area.code[0] === '9') {\n                area.country = names[1] || '';\n                area.province = names[2] || '';\n            }\n            else {\n                area.province = names[0] || '';\n                area.city = names[1] || '';\n                area.county = names[2] || '';\n            }\n            return area;\n        },\n        reset: function (code) {\n            this.code = code || '';\n            return this.setValues();\n        },\n    },\n});\n"],"mappings":"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","ignoreList":[]}